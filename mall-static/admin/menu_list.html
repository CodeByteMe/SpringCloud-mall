<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
		<style type="text/css">
			.shadow1{
				width: 99%;
				height: 50px;
			}
		</style>
	</head>
	<body>
		<div id="container">
			<div class="shadow1" style=" box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1)">
					<div style="display: inline;"><label style="line-height:50px;">数据列表</label>
						
					</div>
					<div id="" style="display: inline;margin-left: 88%;">
						<el-button size="medium">添加</el-button>
					</div>
				</div>
						<template>
						  <el-table
						    :data="tableData"
						    border
						    style="width: 100%">
						    <el-table-column
						      prop="id"
						      label="编号"
						      width="80">
						    </el-table-column>
						    <el-table-column
						    	prop="title"
						      label="菜单名称"
						      width="100">
						    </el-table-column>
						    <el-table-column
						       prop="level"
						      label="菜单级数">
						    </el-table-column>
						    <el-table-column
						       prop="icon"
						      label="前端图标">
						    </el-table-column>
						    <el-table-column
						      prop="name"
						      label="前端名称">
						    </el-table-column>
						    <el-table-column prop="hidden" label="是否显示">
	                            <template scope="scope">
	                                <el-switch
	                                    on-color="#5B7BFA"
	                                    off-color="#dadde5"
	                                    v-model="scope.row.hidden" 
	                                    @change=change(scope.row)                
	                                >
	                                </el-switch>
	                            </template>
	                        </el-table-column>
						     <el-table-column 
						     prop="sort" 
						     label="菜单排序">
						     </el-table-column>
						     <el-table-column label="设置">
						     	<template slot-scope="scope">
								<el-button type="text"  @click="children(scope.row)">查看下级</el-button>
								</template>
							</el-table-column>
							<el-table-column label="操作" fixed="right">
						    	<el-button type="text">编辑</el-button>
						    	<el-button type="text">删除</el-button>
						    	
							</el-table-column>
						  </el-table>
						</template>
				<template>
					<el-pagination
				      @size-change="handleSizeChange"
				      @current-change="handleCurrentChange"
				      :current-page.sync="currentPage3"
				      :page-size="100"
				      layout="prev, pager, next, jumper"
				      :total="1000">
			    </el-pagination>
				</template>
			
		</div>
		<!-- 引入组件库 -->
		<script src="https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.js"></script>
		<!-- 引入组件库 -->
		<script src="https://unpkg.com/element-ui@2.13.2/lib/index.js"></script>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<script type="text/javascript">
			var Vue = new Vue({
				el:"#container"
				,data:{
					keyword:"",
					currentPage3:5,
					tableData: [{
			          id: '1',
			          title: 'kkkk',
			          level: '一级',
			          name: 'vhbjk',
			          hidden: true,
			          sort: '0'
			          
			        }, {
			            id: '2',
			          title: 'kkkk',
			          level: '一级',
			          name: 'vhbjk',
			          hidden: false,
			          sort: '0'
			        }, {
			            id: '3',
			          title: 'kkkk',
			          level: '一级',
			          name: 'vhbjk',
			          hidden: true,
			          sort: '0'
			        }, {
			             id: '4',
			          title: 'kkkk',
			          level: '一级',
			          name: 'vhbjk',
			          hidden: false,
			          sort: '0'
			        }]
				},
				beforeMount:function(){
                var tokenStr = "";
				var str = document.cookie;
				var arr = str.split(";");
				for(var i=0;i<arr.length;i++){
					var s = arr[i];
					if(s.split("=")[0].trim() == "token"){
						tokenStr = s.split("=")[1];
						break;
					}
				}
				if (tokenStr === "") {
					top.location = "login.html";
				}
                axios({
					method: 'get',
					url: 'http://localhost:8766/menu/menu/list',
					params: {
						page: 1,
						pageSize: 5
					},
                    headers: {
                        'token': tokenStr
                    }
					})
					.then(function(res){
						console.log(res.data.data);
                        vm.tableData = res.data.data.list;
                        vm.total = res.data.data.total;
					});
            },
				methods:{
					change:function(row){
						console.log(row)
					},
					handleSizeChange:function(val) {
				        console.log(`每页 ${val} 条`);
				      },
				    handleCurrentChange:function(val) {
				        console.log(`当前页: ${val}`);
				    },
				    children:function(row){
				    	console.log(row)
				    }
				}
			})
		</script>
	</body>
</html>
